# E-Ticaret API Projesi

Bu proje, Laravel ve PostgreSQL kullanÄ±larak geliÅŸtirilmiÅŸ bir e-ticaret API'sidir. JWT token tabanlÄ± authentication sistemi ile gÃ¼venli API endpoint'leri sunar.

## Teknik Gereksinimler

- PHP 8.0+
- PostgreSQL 13+
- Laravel 9.x
- Composer

## Kurulum AdÄ±mlarÄ±

### ğŸ³ Docker ile Kurulum (Ã–nerilen)

#### 1. Projeyi KlonlayÄ±n
```bash
git clone <repository-url>
cd Ecom
```

#### 2. Docker Kurulum Scriptini Ã‡alÄ±ÅŸtÄ±rÄ±n
```bash
chmod +x docker-setup.sh
./docker-setup.sh
```

#### 3. Manuel Docker Kurulumu (Alternatif)
```bash
# Containers'larÄ± build et ve baÅŸlat
docker-compose up -d --build

# Dependencies yÃ¼kle
docker-compose exec app composer install

# Application key oluÅŸtur
docker-compose exec app php artisan key:generate

# JWT secret oluÅŸtur
docker-compose exec app php artisan jwt:secret

# Migration'larÄ± Ã§alÄ±ÅŸtÄ±r
docker-compose exec app php artisan migrate

# Sample data yÃ¼kle
docker-compose exec app php artisan db:seed --class=SampleDataSeeder
```

### ğŸ’» Manuel Kurulum

#### 1. Projeyi KlonlayÄ±n
```bash
git clone <repository-url>
cd Ecom
```

#### 2. BaÄŸÄ±mlÄ±lÄ±klarÄ± YÃ¼kleyin
```bash
composer install
```

#### 3. Environment DosyasÄ±nÄ± OluÅŸturun
```bash
cp .env.example .env
```

#### 4. Environment DeÄŸiÅŸkenlerini DÃ¼zenleyin
`.env` dosyasÄ±nda PostgreSQL baÄŸlantÄ± bilgilerini gÃ¼ncelleyin:

```env
DB_CONNECTION=pgsql
DB_HOST=127.0.0.1
DB_PORT=5432
DB_DATABASE=ecom_api
DB_USERNAME=postgres
DB_PASSWORD=your_postgres_password
```

#### 5. Application Key OluÅŸturun
```bash
php artisan key:generate
```

#### 6. JWT Secret OluÅŸturun
```bash
php artisan jwt:secret
```

#### 7. VeritabanÄ±nÄ± OluÅŸturun
PostgreSQL'de veritabanÄ±nÄ± oluÅŸturun:
```sql
CREATE DATABASE ecom_api;
```

#### 8. Migration'larÄ± Ã‡alÄ±ÅŸtÄ±rÄ±n
```bash
php artisan migrate
```

#### 9. Sample Data'yÄ± YÃ¼kleyin
```bash
php artisan db:seed --class=SampleDataSeeder
```

#### 10. Sunucuyu BaÅŸlatÄ±n
```bash
php artisan serve
```

## API Endpoint'leri

### Authentication

#### POST /api/register
KullanÄ±cÄ± kaydÄ±
```json
{
    "name": "John Doe",
    "email": "john@example.com",
    "password": "password123"
}
```

#### POST /api/login
KullanÄ±cÄ± giriÅŸi
```json
{
    "email": "john@example.com",
    "password": "password123"
}
```

#### GET /api/profile
KullanÄ±cÄ± profili gÃ¶rÃ¼ntÃ¼leme (Token gerekli)

#### PUT /api/profile
KullanÄ±cÄ± profili gÃ¼ncelleme (Token gerekli)
```json
{
    "name": "John Updated",
    "email": "john.updated@example.com"
}
```

#### POST /api/logout
Ã‡Ä±kÄ±ÅŸ yapma (Token gerekli)

### Kategoriler

#### GET /api/categories
TÃ¼m kategorileri listele (Token gerekli)

#### POST /api/categories
Yeni kategori oluÅŸtur (Token gerekli)
```json
{
    "name": "Yeni Kategori",
    "description": "Kategori aÃ§Ä±klamasÄ±"
}
```

#### GET /api/categories/{id}
Kategori detayÄ± (Token gerekli)

#### PUT /api/categories/{id}
Kategori gÃ¼ncelle (Token gerekli)

#### DELETE /api/categories/{id}
Kategori sil (Token gerekli)

### ÃœrÃ¼nler

#### GET /api/products
ÃœrÃ¼nleri listele (Token gerekli)

**Query Parametreleri:**
- `page`: Sayfa numarasÄ±
- `limit`: Sayfa baÅŸÄ±na kayÄ±t sayÄ±sÄ± (varsayÄ±lan: 20)
- `category_id`: Kategori filtresi
- `min_price`: Minimum fiyat
- `max_price`: Maksimum fiyat
- `search`: ÃœrÃ¼n adÄ±nda arama

#### POST /api/products
Yeni Ã¼rÃ¼n ekle (Token gerekli)
```json
{
    "name": "Yeni ÃœrÃ¼n",
    "description": "ÃœrÃ¼n aÃ§Ä±klamasÄ±",
    "price": 99.99,
    "stock_quantity": 50,
    "category_id": 1
}
```

#### GET /api/products/{id}
ÃœrÃ¼n detayÄ± (Token gerekli)

#### PUT /api/products/{id}
ÃœrÃ¼n gÃ¼ncelle (Token gerekli)

#### DELETE /api/products/{id}
ÃœrÃ¼n sil (Token gerekli)

### Sepet

#### GET /api/cart
Sepeti gÃ¶rÃ¼ntÃ¼le (Token gerekli)

#### POST /api/cart/add
Sepete Ã¼rÃ¼n ekle (Token gerekli)
```json
{
    "product_id": 1,
    "quantity": 2
}
```

#### PUT /api/cart/update
Sepet Ã¼rÃ¼n miktarÄ± gÃ¼ncelle (Token gerekli)
```json
{
    "product_id": 1,
    "quantity": 3
}
```

#### DELETE /api/cart/remove/{product_id}
Sepetten Ã¼rÃ¼n Ã§Ä±kar (Token gerekli)

#### DELETE /api/cart/clear
Sepeti temizle (Token gerekli)

### SipariÅŸler

#### GET /api/orders
KullanÄ±cÄ±nÄ±n sipariÅŸlerini listele (Token gerekli)

#### POST /api/orders
SipariÅŸ oluÅŸtur (Token gerekli)

#### GET /api/orders/{id}
SipariÅŸ detayÄ± (Token gerekli)

## Response Format

TÃ¼m API response'larÄ± aÅŸaÄŸÄ±daki formatÄ± kullanÄ±r:

```json
{
    "success": true,
    "message": "Ä°ÅŸlem baÅŸarÄ±lÄ±",
    "data": {},
    "errors": []
}
```

## HTTP Status KodlarÄ±

- `200`: BaÅŸarÄ±lÄ± iÅŸlem
- `201`: OluÅŸturma baÅŸarÄ±lÄ±
- `400`: GeÃ§ersiz istek
- `401`: Yetkisiz eriÅŸim
- `404`: BulunamadÄ±
- `422`: Validasyon hatasÄ±
- `500`: Sunucu hatasÄ±

## Test KullanÄ±cÄ±larÄ±

Seeder ile oluÅŸturulan test kullanÄ±cÄ±larÄ±:

### Admin KullanÄ±cÄ±sÄ±
- **Email:** admin@test.com
- **Password:** admin123
- **Role:** admin

### Normal KullanÄ±cÄ±
- **Email:** user@test.com
- **Password:** user123
- **Role:** user

## Authentication

API'yi kullanmak iÃ§in JWT token gereklidir. Token'Ä± almak iÃ§in:

1. `/api/register` veya `/api/login` endpoint'ini kullanÄ±n
2. Response'dan `data.token` deÄŸerini alÄ±n
3. Sonraki isteklerde `Authorization` header'Ä±nda `Bearer {token}` formatÄ±nda gÃ¶nderin

**Ã–rnek:**
```
Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...
```

## Ã–zellikler

- âœ… JWT Token Authentication
- âœ… KullanÄ±cÄ± YÃ¶netimi (KayÄ±t, GiriÅŸ, Profil)
- âœ… Kategori YÃ¶netimi (CRUD)
- âœ… ÃœrÃ¼n YÃ¶netimi (CRUD)
- âœ… Sepet YÃ¶netimi
- âœ… SipariÅŸ YÃ¶netimi
- âœ… Stok KontrolÃ¼
- âœ… Filtreleme ve Sayfalama
- âœ… Validasyon
- âœ… Error Handling
- âœ… PostgreSQL VeritabanÄ±
- âœ… Sample Data

## GÃ¼venlik

- Åifreler bcrypt ile hash'lenir
- JWT token tabanlÄ± authentication
- Input validasyonu
- SQL injection korumasÄ±
- XSS korumasÄ±

## ğŸ³ Docker KomutlarÄ±

### Container YÃ¶netimi
```bash
# Containers'larÄ± baÅŸlat
docker-compose up -d

# Containers'larÄ± durdur
docker-compose down

# Containers'larÄ± yeniden baÅŸlat
docker-compose restart

# Log'larÄ± gÃ¶rÃ¼ntÃ¼le
docker-compose logs -f

# Belirli bir service'in log'larÄ±nÄ± gÃ¶rÃ¼ntÃ¼le
docker-compose logs -f app
```

### Laravel KomutlarÄ± (Docker iÃ§inde)
```bash
# Artisan komutlarÄ±
docker-compose exec app php artisan migrate
docker-compose exec app php artisan db:seed
docker-compose exec app php artisan cache:clear

# Composer komutlarÄ±
docker-compose exec app composer install
docker-compose exec app composer update

# Yeni dosyalar oluÅŸturma
docker-compose exec app php artisan make:controller Api/NewController
docker-compose exec app php artisan make:model NewModel -m
docker-compose exec app php artisan make:seeder NewSeeder
```

### VeritabanÄ± Ä°ÅŸlemleri
```bash
# PostgreSQL'e baÄŸlan
docker-compose exec postgres psql -U postgres -d ecom_api

# Database backup
docker-compose exec postgres pg_dump -U postgres ecom_api > backup.sql

# Database restore
docker-compose exec -T postgres psql -U postgres -d ecom_api < backup.sql
```

## ğŸ’» GeliÅŸtirme

### Yeni Migration OluÅŸturma
```bash
# Docker ile
docker-compose exec app php artisan make:migration create_table_name

# Manuel
php artisan make:migration create_table_name
```

### Yeni Model OluÅŸturma
```bash
# Docker ile
docker-compose exec app php artisan make:model ModelName -m

# Manuel
php artisan make:model ModelName -m
```

### Yeni Controller OluÅŸturma
```bash
# Docker ile
docker-compose exec app php artisan make:controller Api/ControllerName

# Manuel
php artisan make:controller Api/ControllerName
```

### Yeni Seeder OluÅŸturma
```bash
# Docker ile
docker-compose exec app php artisan make:seeder SeederName

# Manuel
php artisan make:seeder SeederName
```

